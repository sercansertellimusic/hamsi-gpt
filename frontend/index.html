<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAMSƒ∞ AI | ChatGPT Pro v4.5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');
        body { background-color: #212121; color: #ececec; font-family: 'Inter', sans-serif; margin: 0; }
        .chat-input-container { background-color: #2f2f2f; border: 1px solid #424242; border-radius: 24px; }
        .user-msg-bubble { background-color: #2f2f2f; border-radius: 1.5rem; padding: 0.75rem 1.25rem; max-width: 70%; margin-left: auto; border: 1px solid #3d3d3d; }
        .ai-msg-container { width: 100%; margin-bottom: 2rem; display: flex; gap: 1.5rem; }
        
        /* Titreme Efekti */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
        }
        .shake-active { animation: shake 0.5s; }

        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #424242; border-radius: 10px; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <header class="p-4 flex justify-between items-center text-sm font-medium opacity-80 border-b border-white/5">
        <div class="flex items-center gap-2 cursor-pointer hover:bg-[#2f2f2f] p-2 rounded-lg">
            <span>HamsiGPT v4.5</span> <span class="text-xs opacity-50 text-cyan-400">PRO MODE</span>
        </div>
        <div class="flex gap-4 items-center">
            <select id="intelligence-mode" class="bg-transparent border border-white/10 rounded-lg px-2 py-1 text-xs outline-none cursor-pointer hover:bg-white/5">
                <option value="aptal" class="bg-[#212121]">Aptal Mod</option>
                <option value="cok-aptal" class="bg-[#212121]">√áok Aptal Mod</option>
                <option value="iflah-olmaz" class="bg-[#212121]">ƒ∞flah Olmaz</option>
            </select>
            <button class="bg-white text-black px-4 py-1.5 rounded-full font-semibold hover:bg-[#d7d7d7]">Canlƒ±ya Ge√ß</button>
        </div>
    </header>

    <main id="chat-wrapper" class="flex-1 overflow-y-auto custom-scrollbar flex flex-col items-center">
        <div id="welcome-screen" class="mt-[20vh] text-center">
            <h1 class="text-4xl font-semibold mb-8">Hangi konuda sa√ßmalayalƒ±m?</h1>
        </div>
        <div id="messages" class="w-full max-w-3xl px-4 flex flex-col gap-8 py-8"></div>
    </main>

    <footer class="w-full flex flex-col items-center p-4 bg-[#212121] pb-8">
        <div class="w-full max-w-3xl chat-input-container p-3 relative flex items-end gap-2">
            <textarea id="user-input" rows="1" 
                class="flex-1 bg-transparent border-none outline-none resize-none pl-4 py-2 text-base placeholder-[#8e8e8e]" 
                placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n..."></textarea>
            <button id="send-btn" class="p-2 rounded-xl bg-white text-black hover:bg-[#d7d7d7] transition-all">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 11L12 6L17 11M12 18V7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </footer>

    <audio id="pop-sound" src="https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3"></audio>

    <script>
        (function() {
            const CONFIG = {
                apiKey: "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", 
                model: "gpt-4o-mini"
            };

            let chatHistory = [];
            const inputField = document.getElementById("user-input");
            const sendBtn = document.getElementById("send-btn");
            const messagesDiv = document.getElementById("messages");
            const chatWrapper = document.getElementById("chat-wrapper");
            const welcomeScreen = document.getElementById("welcome-screen");
            const popSound = document.getElementById("pop-sound");
            const modeSelector = document.getElementById("intelligence-mode");

            async function startChat() {
                const text = inputField.value.trim();
                if (!text) return;

                const mode = modeSelector.value;
                let instruction = "Sen Hamsi AI'sƒ±n. Profesyonelce aptalsƒ±n. Karadenizli mantƒ±ƒüƒ±n var ama ≈üive yok.";
                
                if(mode === "cok-aptal") instruction += " Cevaplarƒ±n o kadar mantƒ±ksƒ±z olsun ki okuyan ≈üa≈üƒ±rsƒ±n.";
                if(mode === "iflah-olmaz") instruction += " Tamamen inat√ßƒ± ol, her ≈üeye 'hayƒ±r o √∂yle deƒüil' diyerek ba≈üla ve sa√ßmala.";

                if (chatHistory.length === 0) {
                    chatHistory.push({ role: "system", content: instruction });
                }

                if (welcomeScreen) welcomeScreen.style.display = 'none';

                // Kullanƒ±cƒ± Mesajƒ±
                appendMessage("user", text);
                chatHistory.push({ role: "user", content: text });
                inputField.value = "";
                inputField.style.height = 'auto';

                // AI Mesaj Alanƒ±
                const aiContainer = appendMessage("ai", "D√º≈ü√ºn√ºyorum...");
                const textTarget = aiContainer.querySelector('.ai-text-node');

                try {
                    const response = await fetch("https://api.openai.com/v1/chat/completions", {
                        method: "POST",
                        headers: { 
                            "Content-Type": "application/json", 
                            "Authorization": "Bearer " + CONFIG.apiKey 
                        },
                        body: JSON.stringify({ 
                            model: CONFIG.model, 
                            messages: chatHistory, 
                            temperature: 1.3 
                        })
                    });

                    const data = await response.json();
                    const reply = data.choices[0].message.content;
                    
                    // Ses √áal
                    popSound.play().catch(() => {});

                    // Titreme Efekti (Rastgele %30 ihtimalle)
                    if(Math.random() > 0.7) {
                        document.body.classList.add("shake-active");
                        setTimeout(() => document.body.classList.remove("shake-active"), 500);
                    }

                    textTarget.innerText = reply;
                    chatHistory.push({ role: "assistant", content: reply });

                } catch (e) {
                    textTarget.innerHTML = `<span class="text-red-400">Baƒülantƒ± koptu kanka.</span>`;
                }
                chatWrapper.scrollTop = chatWrapper.scrollHeight;
            }

            function appendMessage(role, text) {
                const container = document.createElement("div");
                if (role === 'user') {
                    container.className = "flex justify-end w-full";
                    container.innerHTML = `<div class="user-msg-bubble">${text}</div>`;
                } else {
                    container.className = "ai-msg-container";
                    container.innerHTML = `
                        <div class="w-8 h-8 rounded-full border border-[#424242] flex items-center justify-center flex-shrink-0 text-xs">üêü</div>
                        <div class="ai-text-node pt-1 text-base leading-7 flex-1">${text}</div>
                    `;
                }
                messagesDiv.appendChild(container);
                chatWrapper.scrollTop = chatWrapper.scrollHeight;
                return container;
            }

            sendBtn.addEventListener("click", startChat);
            inputField.addEventListener("keydown", (e) => { if (e.key === "Enter" && !e.shiftKey) { e.preventDefault(); startChat(); } });
            inputField.addEventListener("input", function() { this.style.height = 'auto'; this.style.height = (this.scrollHeight) + 'px'; });
        })();
    </script>
</body>
</html>